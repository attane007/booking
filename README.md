# ระบบจองที่นั่ง (Booking)

คำอธิบายสั้น ๆ

โปรเจคนี้เป็นระบบจองที่นั่งแบบเรียบง่าย เขียนด้วย PHP แบบไม่พึ่งเฟรมเวิร์ก (plain PHP) พร้อมหน้าแอดมินสำหรับจัดการการจอง, ปลั๊กอินสำหรับสร้าง QR code, และระบบบันทึกข้อมูลลงฐานข้อมูล MySQL/MariaDB.

## คุณสมบัติหลัก

- หน้าแสดงผังที่นั่งและการจอง (frontend)
- ระบบแอดมินสำหรับดูและจัดการการจอง (โฟลเดอร์ `admin/`)
- เก็บข้อมูลการจองในฐานข้อมูล MySQL (`bw_booking` ตามค่าเริ่มต้น)
- รองรับการสร้าง QR Code ด้วยไลบรารี `phpqrcode` ที่รวมมาในโปรเจค
- ไฟล์ตั้งค่าและฟังก์ชันช่วยเหลือถูกวางใน `settings/` (เช่น `config.php`, `functions.php`)

## สิ่งที่โปรเจคต้องการ (Requirements)

- PHP >= 7.4 (โปรเจคพัฒนาบน PHP 7.4.x ตามข้อมูลใน SQL dump)
- MySQL / MariaDB (ตัวอย่างใน SQL dump ใช้ MariaDB 10.4.x)
- เปิดใช้งานส่วนขยาย PHP ต่อไปนี้: `mysqli`, `openssl`, `gd` (หรือ gd2) — ไลบรารี QR/รูปภาพมักต้อง GD
- เว็บเซิร์ฟเวอร์ (Apache / Nginx / หรือ built-in PHP server สำหรับการทดสอบ)

## การติดตั้ง (Quick Start)

1. วางโฟลเดอร์โปรเจคไว้ใน webroot ของคุณ (เช่น `C:\xampp\htdocs\booking` หรือโฟลเดอร์ที่ใช้งานของเว็บเซิร์ฟเวอร์)
2. สร้างฐานข้อมูลใหม่ ชื่อ `bw_booking` (หรือชื่ออื่นตามต้องการ)
3. นำเข้าไฟล์ SQL `booking.sql` ไปยังฐานข้อมูลของคุณ (ไฟล์อยู่ที่รากโปรเจค)
   - ตัวอย่าง (บน Windows/cmd):

       mysql -u root -p bw_booking < booking.sql

   หรือใช้ phpMyAdmin / MySQL Workbench เพื่อนำเข้าไฟล์ `booking.sql` ได้
4. แก้ไขการตั้งค่าฐานข้อมูลใน `settings/config.php`:
   - ปรับค่า `DB_HOST`, `DB_NAME`, `DB_USERNAME`, `DB_PASSWORD` ให้ตรงกับเซิร์ฟเวอร์ของคุณ
5. ตรวจสอบว่าโฟลเดอร์ต่อไปนี้มีสิทธิ์เขียน (writable) ถ้าจำเป็นสำหรับการอัพโหลด/บันทึกไฟล์:
   - `datas/` และโฟลเดอร์ย่อย เช่น `datas/payment/`, `qrcode/` เป็นต้น
6. ตรวจสอบว่า PHP เปิดใช้งานส่วนขยายที่จำเป็น (`mysqli`, `openssl`, `gd`)
7. เปิดเบราว์เซอร์และเข้าหน้าเว็บหลัก:
   - หน้า frontend: `http://<your-host>/` (หรือ `index.php`)
   - หน้าแอดมิน: `http://<your-host>/admin/`

## การใช้งานคร่าว ๆ

- ผู้ใช้ทั่วไปสามารถดูผังที่นั่งและทำการจองจากหน้า frontend (ไฟล์ใน `pages/`)
- การชำระเงินและ flow การจ่ายเงินอยู่ภายใต้ `pages/payment/` และ `pages/payment/ajaxfile.php`, `pay.php`, `save.php`, `success.php`
- แอดมินเข้าสู่ระบบผ่าน `admin/` (ไฟล์ล็อกอิน: `admin/pages/login/signin.php`) เพื่อดู/จัดการการจอง และมีเมนูจัดการใน `admin/includes/`

## ปลั๊กอิน/ไลบรารีที่รวมอยู่

- phpqrcode (อยู่ใน `plugins/phpqrcode/`) — ใช้สร้าง QR Code
- Bootstrap & JS libraries (อยู่ใน `assets/vendor/`)

โปรดตรวจสอบไลเซนส์ของไลบรารีบุคคลที่สามก่อนใช้งานเชิงพาณิชย์

## ปรับแต่งที่แนะนำ

- เปลี่ยนค่าเริ่มต้นฐานข้อมูลใน `settings/config.php`
- กำหนดค่าเวลาโซนใน `settings/config.php` (ปัจจุบันตั้งเป็น `Asia/Bangkok`)
- ถ้าต้องการระบบบัญชีผู้ใช้แอดมินที่ปลอดภัยขึ้น ให้พิจารณาเปลี่ยนการจัดการ session/cookie เป็นการใช้ session-based auth และเก็บรหัสผ่านแบบ hash (bcrypt/argon2)
- เพิ่มไฟล์ `LICENSE` หากต้องการกำหนดสิทธิการใช้งานของโปรเจค

## ปัญหาที่อาจเจอ และวิธีแก้เบื้องต้น

- หากเชื่อมต่อฐานข้อมูลไม่ได้: ตรวจสอบค่าที่ตั้งใน `settings/config.php` และว่าบริการฐานข้อมูลกำลังทำงานอยู่
- หากฟังก์ชันเข้ารหัส/ถอดรหัสล้มเหลว: ตรวจสอบว่า `openssl` ถูกเปิดใช้งานใน php.ini
- หากการสร้าง QR หรือการจัดการรูปไม่ทำงาน: ตรวจสอบว่า `gd` ถูกเปิดใช้งาน

## โครงสร้างไฟล์สำคัญ (บางส่วน)

- `index.php` — หน้า frontend เริ่มต้น
- `pages/` — โค้ดหน้า frontend หลัก
- `admin/` — โค้ดส่วนแอดมิน
- `settings/config.php` — การตั้งค่าฐานข้อมูล และตัวแปรระบบหลัก
- `settings/functions.php` — ฟังก์ชันช่วยเหลือทั่วไป (DB helper: `select`, `insert`, `update`, `delete`)
- `booking.sql` — ไฟล์ SQL สำหรับสร้างตารางและข้อมูลเริ่มต้น

## เครดิต / ผู้พัฒนา

- โปรเจคนี้พัฒนาระบบโดย: นายพงศธร แสงม่วง (ปรากฏใน meta tag ของไฟล์ `pages/index.php`, `admin/includes/header.php`, `admin/pages/login/signin.php` และไฟล์หน้าอื่น ๆ)

- ผู้แก้ไข/ผู้ดูแลเอกสาร: attane007 (แก้ไขล่าสุด: 2025-09-02)

ปลั๊กอิน/ไลบรารีบุคคลที่สามที่รวมอยู่ (ขอขอบคุณผู้พัฒนา):
- phpqrcode (ปลั๊กอิน QR code)
- Bootstrap และไลบรารี JS อื่น ๆ (รวมอยู่ใน `assets/vendor`)
- โปรดอ้างอิงไฟล์ `plugins/phpqrcode/README` หรือไลเซนส์ในโฟลเดอร์ไลบรารีนั้น ๆ สำหรับรายละเอียดลิขสิทธิ์

## สถานะลิขสิทธิ์ / ใบอนุญาต

ไม่มีไฟล์ LICENSE ในโปรเจค ณ ขณะนี้ — หากต้องการให้ผู้อื่นใช้/แก้ไข โปรดเพิ่มไฟล์ `LICENSE` ที่เหมาะสม (เช่น MIT, GPL ฯลฯ)

## ถ้าต้องการความช่วยเหลือเพิ่มเติม

ถ้าต้องการ ผมช่วยได้ดังนี้:
- สร้างไฟล์ `LICENSE` ที่เหมาะสม
- เพิ่มหน้าเอกสารวิธีติดตั้งแบบละเอียดหรือสคริปต์อัตโนมัติสำหรับการตั้งค่าสภาพแวดล้อม
- ปรับปรุงระบบล็อกอินให้ปลอดภัยขึ้น (session + bcrypt)

---

สรุป: README นี้เป็นร่างเริ่มต้นเป็นภาษาไทย ครอบคลุมการติดตั้งเบื้องต้น การใช้งาน และให้เครดิตผู้พัฒนาตามข้อมูลในโค้ด หากต้องการให้ผมแก้ไขเนื้อหาเพิ่ม (เช่น ใส่ตัวอย่างภาพหน้าจอ, รายละเอียด API, หรือลิงก์ดาวน์โหลด) ให้บอกได้เลยครับ
